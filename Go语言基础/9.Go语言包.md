# 9. Go语言包（package）



## 9.1 time包

- 当前时间

  ```go
  import (
  	"fmt"
  	"time"
  )
  
  func main() {
  	now := time.Now() //获取当前CST时间
  	fmt.Println("CST:", now)
  	fmt.Println("Year:", now.Year()) //输出当前cst时间年份
  	fmt.Println("Month:", now.Month()) //输出当前cst时间月份,英文格式
  	fmt.Println("int Month:", int(now.Month())) //输出当前cst时间月份,数字格式
  	fmt.Println("Day:", now.Day()) //输出当前cst时间日
  	fmt.Println("Hour:", now.Hour()) //输出当前cst时间小时
  	fmt.Println("Minute:", now.Minute()) //输出当前cst时间分针
  	fmt.Println("Second:", now.Second()) //输出当前cst时间秒
  	fmt.Println("Unix:", now.Unix()) //输出当前cst时间秒时间戳
  	fmt.Println("UnixNano:", now.UnixNano()) //输出当前cst时间纳秒时间戳
  	fmt.Printf("%d-%02d-%02d %02d:%02d:%02d\n", now.Year(), now.Month(), now.Day(), now.Hour(), now.Minute(), now.Second()) //2021-04-15 17:02:31格式时间
  }
  ```

  输出结果：

  ```
  CST: 2021-04-15 17:22:47.9992393 +0800 CST m=+0.004983801
  Year: 2021
  Month: April
  int Month: 4
  Day: 15
  Hour: 17
  Minute: 22
  Second: 47
  Unix: 1618478567
  UnixNano: 1618478567999239300
  2021-04-15 17:22:47
  ```

  

- 时间戳与日期转换（时间格式化）

  时间类型有一个自带的方法Format与ParseInLocation进行日期和时间戳格式化与转换，需要注意的是Go语言中格式化时间模板不是常见的Y-m-d H:M:S而是使用Go的诞生时间2006年1月2号15点04分。

  ```go
  import (
  	"fmt"
  	"time"
  )
  
  func main() {
  
  	u := 1618437813 //变量U，存放时间戳
  
  	//时间戳转字符串日期格式, golang转换模式时间只能是 "2006-01-02 15:04:05" 这个go的诞生时间
  	f1 := time.Unix(int64(u), 0).Format("2006-01-02 15:04:05")    //时间戳转为 2006-01-02 15:04:05 格式日期
  	f2 := time.Unix(int64(u), 0).Format("2006/01/02 15/04/05")    //时间戳转为 2006/01/02 15/04/05 格式日期
  	f3 := time.Unix(int64(u), 0).Format("2006-01-02 15:04:05 PM") //时间戳转为 2006-01-02 15:04:05 PM 格式日期
  	fmt.Println(f1)
  	fmt.Println(f2)
  	fmt.Println(f3)
  
  	//字符串日期格式转时间戳转
  	u1 := "2018-05-05 17:55:22"                                         //变量u1,存放日期
  	t, _ := time.ParseInLocation("2006-01-02 15:04:05", u1, time.Local) //将字符串转为当前时间戳
  	fmt.Println("Unix:", t.Unix())
  }
  ```

  输出结果：

  ```
  2021-04-15 06:03:33
  2021/04/15 06/03/33
  2021-04-15 06:03:33 AM
  Unix: 1525514122
  ```

- 时间操作

  我们在日常的编码过程中可能会遇到要求时间增加 减少以及判断是否相关操作，下面可以利用以下函数对时间进行操作，详情具体参考代码：

  ```go
  import (
  	"fmt"
  	"time"
  )
  
  func main() {
  
  	now := time.Now()                                                   //获取当前CST时间
  	f1 := time.Unix(int64(now.Unix()), 0).Format("2006-01-02 15:04:05") //当前时间日期
  	fmt.Println(f1)
  
  	addNow := now.Add(time.Hour * 24) //新增24小时
  	d, _ := time.ParseDuration("+48h")
  	addNow2 := now.Add(d)                                                      //新增48小时
  	addf1 := time.Unix(int64(addNow.Unix()), 0).Format("2006-01-02 15:04:05")  //增加24小时后的时间日期
  	addf2 := time.Unix(int64(addNow2.Unix()), 0).Format("2006-01-02 15:04:05") //增加48小时后的时间日期
  	fmt.Println(addf1)
  	fmt.Println(addf2)
  
  	subNow := now.Sub(addNow2)                            //比较两个时间相差
  	fmt.Println(subNow, subNow.Hours(), subNow.Seconds()) //打印相差的时间 小时 以及秒
  
  	u1 := "2018-05-05 17:55:22"
  	u2 := "2018-05-05 17:55:22"
  	u3 := "2018-05-18 17:55:22"
  	e1, _ := time.ParseInLocation("2006-01-02 15:04:05", u1, time.Local) //将u1日期转为time格式
  	e2, _ := time.ParseInLocation("2006-01-02 15:04:05", u2, time.Local) //将u2日期转为time格式
  	e3, _ := time.ParseInLocation("2006-01-02 15:04:05", u3, time.Local) //将u3日期转为time格式
  	fmt.Println("e1 = e2 ? ", e1.Equal(e2))                              //比较时间1与时间2是否相等
  	fmt.Println("e1 = e3 ? ", e1.Equal(e3))                              //比较时间1与时间3是否相等
  
  	fmt.Println("e1 < e2 ? ", e1.After(e2))  //判断时间1在时间2之后
  	fmt.Println("e1 < e3 ? ", e1.Before(e3)) //判断时间1在时间3前面
  	fmt.Println("e3 > e1 ? ", e3.After(e1))  //判断时间3在时间1之后
  }
  ```

  输出结果：

  ```
  2021-04-15 18:32:02
  2021-04-16 18:32:02
  2021-04-17 18:32:02
  -48h0m0s -48 -172800
  e1 = e2 ?  true
  e1 = e3 ?  false
  e1 < e2 ?  false
  e1 < e3 ?  true
  e3 > e1 ?  true
  ```

  

- 定时器







## 9.2 runtime包